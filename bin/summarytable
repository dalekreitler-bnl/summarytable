#!/usr/bin/env python3

import summarytable
from pathlib import PurePath
import os
import sleep

test_dir = os.getcwd()
try:
    if os.path.basename(test_dir) == "fast_dp_dir":
        mx_directory = PurePath(test_dir).parent
        print(mx_directory)
        d = summarytable.DataDirectory(mx_directory)
        dobs = summarytable.DisplayObserver()
        fobs = summarytable.FileObserver()
        d.attach(dobs)
        d.attach(fobs)
        while True:
            d.check_directory()
            sleep(10)
    else:
        print("summarytable must be launched from fast_dp_dir...")
except KeyboardInterrupt:
    print("\nExiting gracefully...")
    

